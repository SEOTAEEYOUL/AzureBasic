# 2022-01-25 아키텍처 구성을 위한 기본

3-tier 구성의 웹 전환을 대상으로 할 때 Azure 구독 획득 후 해야 할 일에 대한 설명
구독, RBAC, 자원그룹, Vnet, subnet, VM, disk, Storage Account, PaaS, SaaS 구성 및 배포 방법

- Naming Rule 및 필수 Label 포함
아키텍처 작성, Azure 계산기 를 사용하여 비용 산출하기
- Network 설계서 및 Infra Hybrid Cloud 자료 참조

> [가격 계산기](https://azure.microsoft.com/ko-kr/pricing/calculator/?&ef_id=Cj0KCQiA_c-OBhDFARIsAIFg3ex9uVTd9I0CK5W9UdEcXpgWYrF0yk8dorig7Q11egVjZf4C0nFc3doaArGCEALw_wcB:G:s&OCID=AID2200210_SEM_Cj0KCQiA_c-OBhDFARIsAIFg3ex9uVTd9I0CK5W9UdEcXpgWYrF0yk8dorig7Q11egVjZf4C0nFc3doaArGCEALw_wcB:G:s&gclid=Cj0KCQiA_c-OBhDFARIsAIFg3ex9uVTd9I0CK5W9UdEcXpgWYrF0yk8dorig7Q11egVjZf4C0nFc3doaArGCEALw_wcB)  

## 용어와 개념
### 지리(Geography)
- 2개 이상의 지역음 포함
- 데이터와 애플리케이션을 동일한 지리적 위치에 유지해야 하는 데이터 유지 및 규정 준수의 경계

### 지역(Region)
- 최상의 성능과 보안을 제공하기 위해 고속 네트워크로 연결된 데이터센터의 집합을 뜻함
- 일정한 대기시간(< 2ms) 을 정의한 경계 
- 중부, 남부

### 지역 쌍(Region Pair)
- 일반적으로 동일한 지리적 위치 내에 있는 2개의 지역
- 비즈니스의 연속성 데이터의 손실 방지를 통한 서비스 중단 가능성 최소화


### 영역(Zone)
- 하나 이상의 데이터센터를 가진 지역 내의 물리적인 별도 위치를 말함
- 데이터센터의 오류나 손상을 대비해 서비스의 논리적 결리와 중복성, 내결함성을 보장
- 각 영역의 대기시간은 2ms 이하를 보장

### 데이터센터
- 독립적인 전원 및 냉각 장치, 네트워크를 갖춘 별도의 시설을 말함
- 한국 남부와 중부의 LG U+와 KT 의 데이터센터를 임차해 사용 중

---

### 리소스
- 가상 머신, 데이터베이스, 가상 네트워크, 스토리지 계정 등의 구성요소를 리소스라고 함

### 리소스 그룹
- 동일한 수명, 동일한 프로젝트에 속하는 리소를 함께 그룹으로 묶은 논리적인 그룹
- 리소스는 하나의 리소스 그룹에 속해야 하면 이동할 수 있음

### 리소스 공급자
- 리소스를 제공하는 서비스
- MicroSoft.Compute, Microsoft.Network, Microsoft.Storage ...

---
## 가상 네트워크
### 구현 목적
- 리소스간 안전한 통신
- 온프레미스 인프라 리소스와의 안전한 통신
- 인터넷 아웃바운드 통신

### 주소공간
- CIDR(Classless Inter-Domain Routing) 표기 방법을 사용

#### CIDR
- IPv4 주소를 할당할 때 유연성과 주소 사용의 효율성을 높이기 위해 네트워크 클래스를 사용하지 않고 할당하는 방식  

| CIDR | SUBNET | MASK | WILDCARD MASK | # OF IP ADDRESSES | # OF USABLE IP ADDRESSES |   
|:---|:---|:---|---:|---:|   
| /32	| 255.255.255.255 | 0.0.0.0 | 1 | 1 | 
| /31 | 255.255.255.254 | 0.0.0.1 | 2 | 2* |  
| /30 | 255.255.255.252 | 0.0.0.3 | 4 | 2 | 
| /29 | 255.255.255.248	| 0.0.0.7	| 8	| 6 | 
| /28 | 255.255.255.240 | 0.0.0.15 | 16 | 14 |  
| /27	| 255.255.255.224	| 0.0.0.31 | 32 | 30 |  
| /26	| 255.255.255.192	| 0.0.0.63 | 64 | 62 |  
| /25	| 255.255.255.128	| 0.0.0.127 | 128 | 126 |  
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /24	| 255.255.255.0 | 0.0.0.255 |	256 |	254 |   
| /23	| 255.255.254.0 | 0.0.1.255 |	512 |	510 |   
| /22	| 255.255.252.0 | 0.0.3.255 |	1,024	1,022  
| /21	| 255.255.248.0 | 0.0.7.255 |	2,048	2,046  
| /20	| 255.255.240.0 | 0.0.15.255 |	4,096	| 4,094 |  
| /19	| 255.255.224.0 | 0.0.31.255 |	8,192	| 8,190 |  
| /18	| 255.255.192.0 | 0.0.63.255 | 16,384 |	16,382 |    
| /17	| 255.255.128.0 | 0.0.127.255 | 32,768	32,766  
| /16	| 255.255.0.0 | 0.0.255.255 | 65,536 | 65,534 |    
| /15	| 255.254.0.0 | 0.1.255.255 | 131,072 | 131,070 |    
| /14	| 255.252.0.0 | 0.3.255.255 | 262,144 | 262,142 |  
| /13	| 255.248.0.0 | 0.7.255.255 | 524,288 | 524,286 |  
| /12	| 255.240.0.0 | 0.15.255.255  | 1,048,576 | 1,048,574 |  
| /11	| 255.224.0.0 | 0.31.255.255	| 2,097,152	2,097,150 |  
| /10	| 255.192.0.0 | 0.63.255.255	| 4,194,304	4,194,302 |  
| /9	| 255.128.0.0 | 0.127.255.255	| 8,388,608	8,388,606 |  
| /8	| 255.0.0.0	| 0.255.255.255	| 16,777,216	16,777,214 |  | | 
| /7	| 254.0.0.0	| 1.255.255.255	| 33,554,432	33,554,430 |  | | 
| /6	| 252.0.0.0	| 3.255.255.255	| 67,108,864	67,108,862 |  | | 
| /5 | 248.0.0.0	| 7.255.255.255	| 134,217,728	134,217,726 |  | 
| /4 | 240.0.0.0	| 15.255.255.255 |	268,435,456	268,435,454 |  | 
| /3 | 224.0.0.0	| 31.255.255.255 |	536,870,912	536,870,910 |  | 
| /2 | 192.0.0.0	| 63.255.255.255 |	1,073,741,824	1,073,741,822| 
| /1 | 128.0.0.0	| 127.255.255.255 |	2,147,483,648	2,147,483,646 |  
| /0 | 0.0.0.0 | 255.255.255.255 | 4,294,967,296 | 4,294,967,294 |  